<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Recipe Grid</title>
        <style>
        body {
            font-family: Georgia, 'Times New Roman', Times, serif, Sans-Serif;
            background-color: #d3f0df;
            margin: 0;
            padding: 0;
            height: 100%;
            /* width: 100%; */
            /* overflow-x: auto; */
        }
        .container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            height: 100%;
            width: 100%;
            overflow-x: auto;
        }
        .filter-section {
            /* Filter section backround */
            flex: 0 0 15%;
            width: 20%;
            background-color: #345c45;
            color: white;
            padding: 20px;
            height: 100vh;
        }
        .filter-section h2 {
            /* Filter Section header "Filters" */
            color: #fafafa;
            font-size: 40px;
            margin-bottom: 20px;
        }
        .filter-section .active {
            /* Filter section boxes */
            background-color: #b9d1a1;
            font-family: Times New Roman;
            font-size: 35px;
            padding: 10px;
            border-radius: 5px;
            border-color: #b9d1a1;
            margin-bottom: 8px;
        }
        .recipe-grid {
            /* Grid page */
            flex: 1;
            display: grid;
            grid-template-columns: repeat(3, 440px);
            gap: 50px 10px;
            padding: 20px;
            height: 100%;
            width: 100%;
            justify-items: center;
            justify-content: center;
            align-items : center;
            overflow-y: auto;
            overflow-x: auto;
        }
        .recipe-card {
            /* Recipe boxes */
            background-color: #79a489;
            border-radius: 20px;
            text-align: center;
            padding: 20px;
            height : 300px;
            width : 300px;
            justify-content: space-between;

        }
        .recipe-card .recipe-image {
            /* Recipe image */
            width: 130px;
            height: 130px;
            background-color: #e1e1e1;
            border-radius: 50%;
            margin: 0 auto 15px;
        }
        .recipe-image img {
            width: 100%;  
            height: 100%; 
            object-fit: cover; 
            border-radius: 50%; /* Makes image circular */
        }
        .recipe-card h3 {
            /* Recipe name: "Recipe 1" */
            font-size: 30px;
            margin: 10px 0;
            display: -webkit-box;        
            /* Limit number of lines to 2 and adds ... for text overflow */
            -webkit-line-clamp: 2; 
            -webkit-box-orient: vertical;    
            overflow: hidden;     
            text-overflow: ellipsis;  
        }
        .recipe-card .add-button {
            /* '+' Buttons */
            display: inline-block;
            font-size: 60px;
            color: #ffffff;
            background-color: #345c45;
            border: none;
            border-radius: 50%;
            text-align: center;
            line-height: 70px;
            cursor: pointer;
            text-decoration: none;
            width: 80px;
            height: 80px;
        }
        .add-button:hover{
            background-color: #56725e;
            transform: scale(1.04);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add shadow */
        }

        </style>
    </head>
    <body>
        <div class="container">
            <!-- Recipe Grid Section - Placeholder before backend sends data, can be deleted?-->
            <div class="recipe-grid">
                <div class="recipe-card">
                    <div class="recipe-image">
                        <img src="example-image.jpg" alt="Recipe Image">
                    </div>       
                    <h3>Recipe 1</h3>
                    <a href="https://www.example.com" class="add-button">+</a>
                </div>
                <div class="recipe-card">
                    <div class="recipe-image">
                        <img src="example-image.jpg" alt="Recipe Image">
                    </div>     
                    <h3>Recipe 2</h3>
                    <a href="https://www.example.com" class="add-button">+</a>
                </div>
                <div class="recipe-card">
                    <div class="recipe-image">
                        <img src="example-image.jpg" alt="Recipe Image">
                    </div>     
                    <h3>Recipe 3</h3>
                    <a href="https://www.example.com" class="add-button">+</a>
                </div>
                <div class="recipe-card">
                    <div class="recipe-image">
                        <img src="example-image.jpg" alt="Recipe Image">
                    </div>     
                    <h3>Recipe 4</h3>
                    <a href="https://www.example.com" class="add-button">+</a>
                </div>
                <div class="recipe-card">
                    <div class="recipe-image">
                        <img src="example-image.jpg" alt="Recipe Image">
                    </div>     
                    <h3>Recipe 5</h3>
                    <a href="https://www.example.com" class="add-button">+</a>
                </div>
                <div class="recipe-card">
                    <div class="recipe-image">
                        <img src="example-image.jpg" alt="Recipe Image">
                    </div>     
                    <h3>Recipe 6</h3>
                    <a href="https://www.example.com" class="add-button">+</a>
                </div>
            </div> <!-- End of placeholder, can be deleted later-->
        </div>
                <!-- Script for backend data -->
                <script>
                    // const apiURL = ...
                    // Get data from backend and update
                    async function loadRecipes() {
                        try { //runs if no errors
                            const response = await fetch(apiURL); //Request data from backend
                            const recipes = await response.json();

                            const recipeGrid = document.querySelector('.recipe-grid');
                            recipeGrid.innerHTML = ''; //Clear recipe grid

                            // Loop through the recipes and create cards
                            recipes.forEach(recipe => {
                                        // Create the recipe card HTML structure
                                        const recipeCard = document.createElement('div');
                                        recipeCard.classList.add('recipe-card');

                                        //image
                                        let imageHTML = '';
                                        try{
                                            imageHTML = `
                                                    <div class="recipe-image">
                                                        <img src="${recipe.image}" alt="${recipe.name}">
                                                    </div>
                                                `;
                                        } catch(error){
                                             console.error ('Image Error', error);
                                        }

                                        //name
                                        let nameHTML = '';
                                        try{
                                            nameHTML = `
                                                <h3>${recipe.name}</h3> `       
                                        } catch(error){
                                            console.error ('Name Error', error);
                                        }

                                        //url
                                        let urlHTML = '';
                                        try{
                                            urlHTML = `
                                            <a href="${recipe.url}" class="add-button" target="_blank">+</a>`;
                                        } catch(error) {
                                            console.error('URL Error', error);
                                        }

                                        recipeCard.innerHTML = `
                                            <div class="recipe-image">${imageHTML}</div>
                                            ${nameHTML}
                                            ${urlHTML}
                                        `;
                                        //Add new recipe card to the grid after getting data
                                            recipeGrid.appendChild(recipeCard);
                                    });
                                } catch (error) { //Error message
                                    console.error ('Error1', error)
                                }
                    }
                    // Load recipes after the page loads
                    document.addEventListener('DOMContentLoaded', loadRecipes);
                </script>
    </body>
</html>
